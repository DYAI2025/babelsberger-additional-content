<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Park Babelsberg Potsdam â€“ Praktische Infos, Toiletten, Wege & Highlights</title>
<meta name="description" content="Alle praktischen Infos fÃ¼r deinen Besuch: Wo sind Toiletten? Welche Wege sind barrierefrei? Echte Bilder zeigen, was dich erwartet. FÃ¼r Familien, Senioren, Hundebesitzer.">

<!-- Preload Hero Image for LCP -->
<link rel="preload" href="images/park-babelsberg/jagdschloss.jpeg" as="image" fetchpriority="high">

<!-- SEO Enhancements -->
<meta name="keywords" content="park babelsberg toiletten, wc park babelsberg, restaurants park babelsberg, parkplÃ¤tze park babelsberg, neuer garten potsdam toiletten, schloss babelsberg gastronomie, potsdam park toiletten finden, park babelsberg karte">
<meta name="geo.region" content="DE-BB">
<meta name="geo.placename" content="Park Babelsberg, Potsdam">
<meta name="geo.position" content="52.400;13.085">
<link rel="canonical" href="https://park.babelsberger.info/">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://park.babelsberger.info/">
<meta property="og:title" content="Parks und SchlÃ¶sser Potsdam â€“ Park Babelsberg, Neuer Garten & Glienicke">
<meta property="og:description" content="UNESCO-Welterbe Parks in Potsdam: Interaktive Karten mit WCs, Restaurants & ParkplÃ¤tzen. Location-Finder fÃ¼r Park Babelsberg, Neuer Garten und Park Glienicke.">
<meta property="og:image" content="https://park.babelsberger.info/park-babelsberg/images/park-babelsberg/jagdschloss.jpeg">
<meta property="og:image:width" content="1600">
<meta property="og:image:height" content="900">
<meta property="og:locale" content="de_DE">
<meta property="og:site_name" content="Park Babelsberg Info">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="https://park.babelsberger.info/">
<meta name="twitter:title" content="Parks und SchlÃ¶sser Potsdam â€“ Location-Finder">
<meta name="twitter:description" content="UNESCO-Welterbe Parks: WCs, Restaurants & ParkplÃ¤tze finden mit interaktiver Karte">
<meta name="twitter:image" content="https://park.babelsberger.info/park-babelsberg/images/park-babelsberg/jagdschloss.jpeg">

<link rel="stylesheet" href="assets/style.css">

<!-- Google Analytics 4 - Deferred for performance -->
<script defer src="https://www.googletagmanager.com/gtag/js?id=G-K409QD2YSJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-K409QD2YSJ');
</script>

<!-- Google AdSense - Deferred for performance -->
<script defer src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1712273263687132" crossorigin="anonymous"></script>

<!-- Preconnect for faster Ad loading -->
<link rel="preconnect" href="https://pagead2.googlesyndication.com" crossorigin>
<link rel="preconnect" href="https://googleads.g.doubleclick.net" crossorigin>

<!-- DSGVO-konformes Cookie-Consent-Management -->
<script src="assets/cookie-consent.js"></script>

<!-- Schema.org JSON-LD for Location Finder -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "TouristAttraction",
  "name": "Park Babelsberg",
  "description": "Historischer Landschaftspark in Potsdam mit Location-Finder fÃ¼r WCs, Restaurants und ParkplÃ¤tze",
  "url": "https://park.babelsberger.info/park-babelsberg/index.html",
  "image": "https://park.babelsberger.info/park-babelsberg/images/park-babelsberg/jagdschloss.jpeg",
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": "52.400",
    "longitude": "13.085"
  },
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Potsdam",
    "addressRegion": "Brandenburg",
    "addressCountry": "DE"
  },
  "amenityFeature": [
    {
      "@type": "LocationFeatureSpecification",
      "name": "WC-Finder",
      "value": "Interaktive Karte mit allen Ã¶ffentlichen Toiletten im Park"
    },
    {
      "@type": "LocationFeatureSpecification",
      "name": "Gastronomie-Finder",
      "value": "Restaurants, CafÃ©s und Imbisse in der Umgebung"
    },
    {
      "@type": "LocationFeatureSpecification",
      "name": "Parkplatz-Finder",
      "value": "ParkplÃ¤tze fÃ¼r PKW und FahrrÃ¤der"
    }
  ],
  "hasMap": {
    "@type": "Map",
    "name": "Park Babelsberg Location-Finder",
    "url": "https://park.babelsberger.info/park-babelsberg/index.html#location-finder",
    "mapType": "VenueMap"
  }
}
</script>

</head>
<body>

<!-- Language Toggle Button -->
<button id="lang-toggle" class="lang-toggle icon-only" aria-label="Switch to English" title="Switch to English">
  <span class="lang-text lang-text-de" aria-hidden="true">DE</span>
  <span class="lang-text lang-text-en" aria-hidden="true">EN</span>
</button>

<!-- Theme Toggle Button -->
<button id="theme-toggle" class="theme-toggle icon-only" aria-label="Dark Mode umschalten" title="Dark Mode umschalten">
  <i data-lucide="sun" class="theme-icon theme-icon-sun icon icon-md" aria-hidden="true"></i>
  <i data-lucide="moon" class="theme-icon theme-icon-moon icon icon-md" aria-hidden="true"></i>
</button>

<header class="header">
  <div class="hero" style="position: relative; overflow: hidden; border-radius: var(--radius-xl, 16px);">
    <img src="images/park-babelsberg/jagdschloss.jpeg"
         alt="Park Babelsberg mit Blick aufs Jagdschloss Glienicke"
         width="1600"
         height="900"
         fetchpriority="high"
         decoding="async"
         style="width: 100%; height: auto; display: block; object-fit: cover; min-height: 400px;">
    <h1 style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; font-size: clamp(2.5rem, 6vw, 4.5rem); line-height: 1.1; text-shadow: 0 4px 12px rgba(0,0,0,0.6); z-index: 2; width: 90%; max-width: 1200px;" data-i18n="hero.title">
      Parks und SchlÃ¶sser in Potsdam-Babelsberg
      <span style="font-size: clamp(1.25rem, 3vw, 2rem); display: block; margin-top: 1rem; text-shadow: 0 2px 8px rgba(0,0,0,0.7);" data-i18n="hero.subtitle">Kultur, Natur und Erholung am Ufer der Havel</span>
    </h1>
    <div style="position: absolute; inset: 0; background: linear-gradient(180deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.4) 100%); z-index: 1;"></div>
  </div>
  <p class="lead" data-i18n="hero.lead">Entdecken Sie die UNESCO-Welterbe-Parks und KulturdenkmÃ¤ler am Ufer der Havel. Mit praktischen Informationen zu Ã–rtlichkeiten, Anfahrt und aktuellen Gegebenheiten vor Ort.</p>
  <nav class="nav" aria-label="Sprungmarken">
    <div class="badges">
      <a class="badge" href="#fun-facts" data-i18n="nav.funfacts">Fun Facts</a>
      <a class="badge" href="#areale" data-i18n="nav.areale">Die 4 Areale</a>
      <a class="badge" href="#location-finder" data-i18n="nav.finder">Location-Finder</a>
      <a class="badge" href="#kategorien" data-i18n="nav.categories">Kategorien</a>
      <a class="badge" href="#enthusiasts" data-i18n="nav.enthusiasts">FÃ¼r Enthusiasten</a>
      <a class="badge" href="#anreise" data-i18n="nav.arrival">Anreise</a>
      <a class="badge" href="#faq" data-i18n="nav.faq">FAQ</a>
      <a class="badge" href="wasseraktivitaeten.html" data-i18n="nav.wasser">WasseraktivitÃ¤ten</a>
    </div>
  </nav>
</header>

<main id="content" data-page="park-babelsberg" data-date="2025-10-25">

  <!-- Fun Facts Section -->
  <section id="fun-facts" class="section" style="background: linear-gradient(135deg, var(--bg-accent) 0%, var(--bg-secondary) 100%); padding: var(--space-8) var(--container-padding); margin-left: calc(var(--container-padding) * -1); margin-right: calc(var(--container-padding) * -1);">
    <div style="max-width: var(--container-max); margin: 0 auto;">
      <div class="section-header">
        <h2 data-i18n="funfacts.title">Wusstest du schon?</h2>
        <p data-i18n="funfacts.subtitle">Faszinierende Fakten Ã¼ber die UNESCO-Welterbe-Parks in Potsdam</p>
      </div>

      <div class="fun-facts-grid">
        <div class="fun-fact-card" style="--accent: #10b981;">
          <div class="fun-fact-icon">ğŸ›ï¸</div>
          <div class="fun-fact-number" data-count="1990">1990</div>
          <h3 data-i18n="funfacts.unesco.title">UNESCO-Welterbe</h3>
          <p data-i18n="funfacts.unesco.text">Die Potsdamer Kulturlandschaft wurde 1990 in die UNESCO-Welterbeliste aufgenommen â€“ zusammen mit Schloss Sanssouci.</p>
        </div>

        <div class="fun-fact-card" style="--accent: #3b82f6;">
          <div class="fun-fact-icon">ğŸŒ³</div>
          <div class="fun-fact-number" data-count="124">124</div>
          <h3 data-i18n="funfacts.hectares.title">Hektar ParkflÃ¤che</h3>
          <p data-i18n="funfacts.hectares.text">Der Park Babelsberg erstreckt sich Ã¼ber 124 Hektar â€“ das entspricht etwa 174 FuÃŸballfeldern!</p>
        </div>

        <div class="fun-fact-card" style="--accent: #f59e0b;">
          <div class="fun-fact-icon">ğŸ‘‘</div>
          <div class="fun-fact-number" data-count="1833">1833</div>
          <h3 data-i18n="funfacts.kaiser.title">Kaiser Wilhelm I.</h3>
          <p data-i18n="funfacts.kaiser.text">Das Schloss Babelsberg war das Sommerschloss von Kaiser Wilhelm I. â€“ erbaut von Karl Friedrich Schinkel.</p>
        </div>

        <div class="fun-fact-card" style="--accent: #ec4899;">
          <div class="fun-fact-icon">ğŸ¨</div>
          <div class="fun-fact-number" data-count="3">3</div>
          <h3 data-i18n="funfacts.architects.title">BerÃ¼hmte Architekten</h3>
          <p data-i18n="funfacts.architects.text">Schinkel, Persius und Strack â€“ drei Architektur-Genies schufen gemeinsam das neugotische Meisterwerk.</p>
        </div>

        <div class="fun-fact-card" style="--accent: #8b5cf6;">
          <div class="fun-fact-icon">ğŸŒŠ</div>
          <div class="fun-fact-number" data-count="7">7km</div>
          <h3 data-i18n="funfacts.shoreline.title">Uferlinie</h3>
          <p data-i18n="funfacts.shoreline.text">Ãœber 7 Kilometer malerische Uferwege entlang der Havel laden zum Spazieren und Verweilen ein.</p>
        </div>

        <div class="fun-fact-card" style="--accent: #ef4444;">
          <div class="fun-fact-icon">ğŸ¬</div>
          <div class="fun-fact-number" data-count="1945">1945</div>
          <h3 data-i18n="funfacts.potsdam.title">Potsdamer Konferenz</h3>
          <p data-i18n="funfacts.potsdam.text">Im Schloss Cecilienhof (Neuer Garten) fand 1945 die historische Potsdamer Konferenz statt.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Die 4 Areale - Unified Card Grid -->
  <section id="areale" class="section" style="background: var(--bg-accent); padding: var(--space-8) var(--container-padding); margin-left: calc(var(--container-padding) * -1); margin-right: calc(var(--container-padding) * -1);">
    <div style="max-width: var(--container-max); margin: 0 auto;">
      <div class="section-header">
      <h2 data-i18n="areale.title">Die 4 Areale â€“ Eine Landschaft, vier Erlebnisse</h2>
      <p data-i18n="areale.subtitle">Von der historischen Parkanlage bis zum kÃ¶niglichen Schloss â€“ entdecke die verbundenen UNESCO-Welterbe-Areale am Ufer der Havel.</p>
    </div>

    <div class="grid-2">
      <!-- Areal 1: Park Babelsberg -->
      <article class="card-areal">
        <img src="images/park-babelsberg/Uferweg_nord.jpeg" alt="Park Babelsberg - Uferweg Nord mit Panoramablick" loading="lazy">
        <div class="card-areal-content">
          <span class="card-areal-label" data-i18n="areale.label">Areal 1</span>
          <h3 data-i18n="areale.areal1.title">Park Babelsberg</h3>
          <p data-i18n="areale.areal1.description">Der 124 Hektar groÃŸe englische Landschaftspark am Ufer der Havel ist ein Meisterwerk der Gartenkunst. Seit 1990 UNESCO-Welterbe.</p>
          <a href="#location-finder" class="btn" style="margin-top: auto;" data-i18n="areale.mapButton">Kartenansicht</a>
        </div>
      </article>

      <!-- Areal 2: Schloss Babelsberg -->
      <article class="card-areal">
        <img src="images/park-babelsberg/schloss_garten.jpeg" alt="Schloss Babelsberg Garten" loading="lazy">
        <div class="card-areal-content">
          <span class="card-areal-label" data-i18n="areale.label">Areal 2</span>
          <h3 data-i18n="areale.areal2.title">Schloss Babelsberg</h3>
          <p data-i18n="areale.areal2.description">Das neugotische Sommerschloss von Kaiser Wilhelm I. thront majestÃ¤tisch Ã¼ber der Havel. Erbaut 1833-1849 nach EntwÃ¼rfen von Karl Friedrich Schinkel.</p>
          <a href="#location-finder" class="btn" style="margin-top: auto;" data-i18n="areale.mapButton">Kartenansicht</a>
        </div>
      </article>

      <!-- Areal 3: Neuer Garten -->
      <article class="card-areal">
        <img src="images/park-babelsberg/cicilienhof.jpeg" alt="Schloss Cecilienhof im Neuen Garten" loading="lazy">
        <div class="card-areal-content">
          <span class="card-areal-label" data-i18n="areale.label">Areal 3</span>
          <h3 data-i18n="areale.areal3.title">Neuer Garten</h3>
          <p data-i18n="areale.areal3.description">Ein frÃ¼hes Meisterwerk der Landschaftsgestaltung am Heiligen See. Angelegt ab 1787 fÃ¼r Friedrich Wilhelm II. Hier fand 1945 die Potsdamer Konferenz statt.</p>
          <a href="#location-finder" class="btn" style="margin-top: auto;" data-i18n="areale.mapButton">Kartenansicht</a>
        </div>
      </article>

      <!-- Areal 4: Park Glienicke -->
      <article class="card-areal">
        <img src="images/park-babelsberg/jagdschloss.jpeg" alt="Jagdschloss Glienicke" loading="lazy">
        <div class="card-areal-content">
          <span class="card-areal-label" data-i18n="areale.label">Areal 4</span>
          <h3 data-i18n="areale.areal4.title">Park Glienicke</h3>
          <p data-i18n="areale.areal4.description">Der sÃ¼dlichste Teil der UNESCO-Welterbe-Landschaft an der Glienicker BrÃ¼cke. Ein verstecktes Juwel mit italienisch inspirierter Architektur.</p>
          <a href="#location-finder" class="btn" style="margin-top: auto;" data-i18n="areale.mapButton">Kartenansicht</a>
        </div>
      </article>
      </div>
    </div>
  </section>

  <!-- Kategorien-Ãœbersicht -->
  <section id="kategorien" class="section" style="background: var(--bg-accent); padding: var(--space-8) var(--container-padding); margin-left: calc(var(--container-padding) * -1); margin-right: calc(var(--container-padding) * -1);">
    <div style="max-width: var(--container-max); margin: 0 auto;">
      <div class="section-header">
        <h2 data-i18n="categories.title">Entdecke nach Kategorien</h2>
        <p data-i18n="categories.subtitle">Finde schnell was du suchst â€“ von SehenswÃ¼rdigkeiten bis zu praktischen Services.</p>
      </div>

      <div class="grid-3">
        <article class="card">
          <img src="images/park-babelsberg/spot-05-haus003.jpeg" alt="SchlÃ¶sser & Bauwerke" loading="lazy">
          <h3 data-i18n="categories.castles.title">SchlÃ¶sser & Bauwerke</h3>
          <p class="card-category-count" data-i18n="categories.castles.count">8 historische Orte</p>
          <p data-i18n="categories.castles.description">Neugotische SchlÃ¶sser, AussichtstÃ¼rme und historische Bauwerke aus verschiedenen Epochen.</p>
          <a href="sehenswuerdigkeiten.html" class="btn" data-i18n="categories.castles.button">Alle ansehen</a>
        </article>

        <article class="card">
          <img src="images/park-babelsberg/Gastronomie.jpeg" alt="Gastronomie" loading="lazy">
          <h3 data-i18n="categories.gastro.title">Gastronomie</h3>
          <p class="card-category-count" data-i18n="categories.gastro.count">303 Locations</p>
          <p data-i18n="categories.gastro.description">Restaurants, CafÃ©s, Imbisse und BiergÃ¤rten in FuÃŸnÃ¤he zum Park.</p>
          <a href="/park-babelsberg/gastronomie.html" class="btn" data-i18n="categories.gastro.button">Alle ansehen</a>
        </article>

        <article class="card">
          <img src="images/park-babelsberg/wc.webp" alt="Praktisches - WC, Parking, Ã–PNV" loading="lazy">
          <h3 data-i18n="categories.practical.title">Praktisches</h3>
          <p class="card-category-count" data-i18n="categories.practical.count">WC, Parking, Ã–PNV</p>
          <p data-i18n="categories.practical.description">Toiletten, ParkplÃ¤tze und Ã¶ffentliche Verkehrsmittel mit Live-Daten.</p>
          <a href="praktisches.html" class="btn" data-i18n="categories.practical.button">Alle ansehen</a>
        </article>

        <article class="card">
          <img src="images/park-babelsberg/zweio_bÃ¤ume.jpeg" alt="Natur & Wege" loading="lazy">
          <h3 data-i18n="categories.nature.title">Natur & Wege</h3>
          <p class="card-category-count" data-i18n="categories.nature.count">Spazierwege & Wiesen</p>
          <p data-i18n="categories.nature.description">Malerische Uferwege, Liegewiesen und Naturerlebnisse im Park.</p>
          <a href="natur-wege.html" class="btn" data-i18n="categories.nature.button">Entdecken</a>
        </article>

        <article class="card">
          <img src="images/park-babelsberg/parkgebÃ¼hren.jpeg" alt="Anreise & Parken" loading="lazy">
          <h3 data-i18n="categories.arrival.title">Anreise & Parken</h3>
          <p class="card-category-count" data-i18n="categories.arrival.count">1200+ ParkplÃ¤tze</p>
          <p data-i18n="categories.arrival.description">Alle Infos zu Anfahrt, ParkplÃ¤tzen und Ã¶ffentlichen Verkehrsmitteln.</p>
          <a href="anreise.html" class="btn" data-i18n="categories.arrival.button">Mehr erfahren</a>
        </article>

        <article class="card">
          <img src="images/park-babelsberg/Parkordnung_Park_Babelsberg.jpeg" alt="Regeln & Ordnung" loading="lazy">
          <h3 data-i18n="categories.rules.title">Regeln & Ordnung</h3>
          <p class="card-category-count" data-i18n="categories.rules.count">Parkordnung</p>
          <p data-i18n="categories.rules.description">Was ist erlaubt? Radfahren, Picknicken, Baden und mehr.</p>
          <a href="/park-babelsberg/parkordnung-vergleich.html" class="btn" data-i18n="categories.rules.button">Vergleich ansehen</a>
        </article>
      </div>
    </div>
  </section>

  <!-- AdSense Ad Unit 1 -->
  <section class="section" style="padding: var(--space-4) 0;">
    <div style="max-width: 728px; margin: 0 auto;">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-1712273263687132"
           data-ad-slot="4436722440"
           data-ad-format="horizontal"
           data-full-width-responsive="true"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </section>

  <!-- Highlights -->
  <section id="highlights" class="section" style="background: var(--bg-accent); padding: var(--space-8) var(--container-padding); margin-left: calc(var(--container-padding) * -1); margin-right: calc(var(--container-padding) * -1);">
    <div style="max-width: var(--container-max); margin: 0 auto;">
      <div class="section-header">
        <h2 data-i18n="highlights.title">Die schÃ¶nsten Orte</h2>
        <p data-i18n="highlights.subtitle">Entdecke die historischen Bauwerke und landschaftlichen Highlights im UNESCO-Welterbe Park Babelsberg.</p>
      </div>

      <div class="grid-2">
        <article class="card">
          <img src="images/park-babelsberg/attractions/schloss-babelsberg-1.webp" alt="Schloss Babelsberg" loading="lazy">
          <h3 data-i18n="highlights.schloss.title">Schloss Babelsberg</h3>
          <p data-i18n="highlights.schloss.description">Neugotisches Sommerschloss von Kaiser Wilhelm I. Erbaut 1833-1849 von Schinkel, Persius und Strack. UNESCO-Welterbe seit 1990.</p>
          <a href="/park-babelsberg/schloss-babelsberg.html" class="btn" data-i18n="highlights.schloss.button">Mehr erfahren</a>
        </article>

        <article class="card">
          <img src="images/park-babelsberg/attractions/flatowturm-1.webp" alt="Flatowturm" loading="lazy">
          <h3 data-i18n="highlights.flatow.title">Flatowturm</h3>
          <p data-i18n="highlights.flatow.description">46m hoher Aussichtsturm mit 360Â°-Panorama Ã¼ber Potsdam. Erbaut 1853-1856. GeÃ¶ffnet Maiâ€“Oktober, Sa/So 10-17:30 Uhr.</p>
          <a href="/park-babelsberg/flatowturm.html" class="btn" data-i18n="highlights.flatow.button">Mehr erfahren</a>
        </article>

        <article class="card">
          <img src="images/park-babelsberg/Uferweg_nord.jpeg" alt="Uferweg Nord â€“ Blick Ã¼ber den Tiefen See" loading="lazy">
          <h3 data-i18n="highlights.uferweg.title">Uferweg Nord</h3>
          <p data-i18n="highlights.uferweg.description">Malerischer Spazierweg mit freiem Panoramablick Ã¼ber den Tiefen See. Perfekt zum Entspannen, Fotografieren und Sonnenuntergang genieÃŸen.</p>
          <a href="uferweg-nord.html" class="btn" data-i18n="highlights.uferweg.button">Mehr erfahren</a>
        </article>

        <article class="card">
          <img src="images/park-babelsberg/attractions/matrosenhaus-1.webp" alt="Matrosenhaus" loading="lazy">
          <h3 data-i18n="highlights.matrosenhaus.title">Matrosenhaus</h3>
          <p data-i18n="highlights.matrosenhaus.description">Historisches Bootshaus am Havelufer aus dem 19. Jahrhundert. Heute Event-Location mit romantischem Blick aufs Wasser.</p>
          <a href="/park-babelsberg/matrosenhaus.html" class="btn" data-i18n="highlights.matrosenhaus.button">Mehr erfahren</a>
        </article>
      </div>
    </div>
  </section>

  <!-- AdSense Ad Unit 2 -->
  <section class="section" style="padding: var(--space-4) 0;">
    <div style="max-width: 728px; margin: 0 auto;">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-1712273263687132"
           data-ad-slot="4436722440"
           data-ad-format="horizontal"
           data-full-width-responsive="true"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </section>

  <!-- Enthusiasten Guides -->
  <section id="enthusiasts" class="section" style="background: var(--bg-accent); padding: var(--space-8) var(--container-padding); margin-left: calc(var(--container-padding) * -1); margin-right: calc(var(--container-padding) * -1);">
    <div style="max-width: var(--container-max); margin: 0 auto;">
      <div class="section-header">
        <h2 data-i18n="enthusiasts.title">FÃ¼r Enthusiasten â€“ Die Parks als vielschichtiges Palimpsest</h2>
        <p data-i18n="enthusiasts.subtitle">Entdecke die Potsdamer Parks aus sechs einzigartigen Perspektiven: Von der Landschaftsfotografie Ã¼ber Geocaching und Sport bis zur Spurensuche im Kalten Krieg. Detaillierte Guides mit Personas, Community-Geschichten und professionellem Know-how â€“ die Parks als lebendige BÃ¼hnen fÃ¼r zeitgenÃ¶ssische Praktiken.</p>
      </div>

      <div class="grid-2" style="gap: var(--space-6);">
        <article class="card" style="display: flex; flex-direction: column;">
          <img src="images/park-babelsberg/jagdschloss.jpeg" alt="Landschaftsfotografie in den Parks" loading="lazy" style="width: 100%; height: 250px; object-fit: cover; border-radius: var(--radius-lg);">
          <div style="flex: 1; display: flex; flex-direction: column; padding: var(--space-4) 0;">
            <h3 style="margin-bottom: var(--space-2);" data-i18n="enthusiasts.photography.title">
              <i data-lucide="camera" class="icon icon-sm" style="vertical-align: text-bottom; margin-right: 8px;"></i>
              Landschaftsfotografie Guide
            </h3>
            <p style="margin-bottom: var(--space-4); color: var(--text-secondary); flex: 1;" data-i18n="enthusiasts.photography.description">
              Professioneller Foto-Guide mit besten Spots, Licht-Timing-Analyse und Kompositions-Tipps.
              LennÃ©s Sichtachsen fotografisch interpretieren, rechtliche Rahmenbedingungen der SPSG,
              Equipment-Empfehlungen (Teleobjektive fÃ¼r Kompression), HDR-Techniken und Schwarz-WeiÃŸ-Fotografie.
            </p>
            <a href="fotografie.html" class="btn" style="align-self: flex-start;" data-i18n="enthusiasts.photography.button">Zum Foto-Guide</a>
          </div>
        </article>

        <article class="card" style="display: flex; flex-direction: column;">
          <img src="images/park-babelsberg/park_babelsberg_flatowturm.jpeg" alt="Geocaching in den Parks" loading="lazy" style="width: 100%; height: 250px; object-fit: cover; border-radius: var(--radius-lg);">
          <div style="flex: 1; display: flex; flex-direction: column; padding: var(--space-4) 0;">
            <h3 style="margin-bottom: var(--space-2);" data-i18n="enthusiasts.geocaching.title">
              <i data-lucide="map-pin" class="icon icon-sm" style="vertical-align: text-bottom; margin-right: 8px;"></i>
              Geocaching Guide
            </h3>
            <p style="margin-bottom: var(--space-4); color: var(--text-secondary); flex: 1;" data-i18n="enthusiasts.geocaching.description">
              Digitale Schatzsuche im UNESCO-Welterbe: Multi-Caches (Park Babelsberg 01/02 mit 8 Stationen),
              Mystery-Caches an der Glienicker BrÃ¼cke, Adventure Labs. SPSG-Regeln, Muggel-Warnungen,
              Community-Tipps und GPX-Downloads fÃ¼r Navigation.
            </p>
            <a href="geocaching.html" class="btn" style="align-self: flex-start;" data-i18n="enthusiasts.geocaching.button">Zum Geocaching-Guide</a>
          </div>
        </article>

        <article class="card" style="display: flex; flex-direction: column;">
          <img src="images/park-babelsberg/Uferweg_nord.jpeg" alt="Laufen in den Parks" loading="lazy" style="width: 100%; height: 250px; object-fit: cover; border-radius: var(--radius-lg);">
          <div style="flex: 1; display: flex; flex-direction: column; padding: var(--space-4) 0;">
            <h3 style="margin-bottom: var(--space-2);" data-i18n="enthusiasts.running.title">
              <i data-lucide="activity" class="icon icon-sm" style="vertical-align: text-bottom; margin-right: 8px;"></i>
              Laufen & Jogging Guide
            </h3>
            <p style="margin-bottom: var(--space-4); color: var(--text-secondary); flex: 1;" data-i18n="enthusiasts.running.description">
              Kuratierte Laufrouten mit prÃ¤zisen Distanzen, HÃ¶henprofilen und GPX-Downloads.
              Park Babelsberg: HÃ¼gelige 4,5-7,7 km Strecken (120m HÃ¶henmeter). Neuer Garten: Flache 4 km Runde.
              Beste Zeiten, Untergrund-Infos, Trainingstipps fÃ¼r Intervall- und TempolÃ¤ufe.
            </p>
            <a href="laufen.html" class="btn" style="align-self: flex-start;" data-i18n="enthusiasts.running.button">Zum Lauf-Guide</a>
          </div>
        </article>

        <article class="card" style="display: flex; flex-direction: column;">
          <img src="images/park-babelsberg/liegewiesen.jpeg" alt="Yoga in den Parks" loading="lazy" style="width: 100%; height: 250px; object-fit: cover; border-radius: var(--radius-lg);">
          <div style="flex: 1; display: flex; flex-direction: column; padding: var(--space-4) 0;">
            <h3 style="margin-bottom: var(--space-2);" data-i18n="enthusiasts.yoga.title">
              <i data-lucide="flower-2" class="icon icon-sm" style="vertical-align: text-bottom; margin-right: 8px;"></i>
              Yoga & Achtsamkeit Guide
            </h3>
            <p style="margin-bottom: var(--space-4); color: var(--text-secondary); flex: 1;" data-i18n="enthusiasts.yoga.description">
              Spirituelle Kraftorte fÃ¼r Outdoor-Yoga und Achtsamkeits-SpaziergÃ¤nge.
              Ruhige Wiesen abseits der Hauptwege, praktische Tipps fÃ¼r Praxis im Freien (Unterlage, Kleidung),
              "Bewegte Meditation" (wÃ¶chentlich Freitag 8:30), LennÃ©s Sichtachsen als Meditations-Pfade.
            </p>
            <a href="yoga.html" class="btn" style="align-self: flex-start;" data-i18n="enthusiasts.yoga.button">Zum Yoga-Guide</a>
          </div>
        </article>

        <article class="card" style="display: flex; flex-direction: column;">
          <img src="images/park-babelsberg/jagdschloss.jpeg" alt="Geschichte & Architektur" loading="lazy" style="width: 100%; height: 250px; object-fit: cover; border-radius: var(--radius-lg);">
          <div style="flex: 1; display: flex; flex-direction: column; padding: var(--space-4) 0;">
            <h3 style="margin-bottom: var(--space-2);" data-i18n="enthusiasts.history.title">
              <i data-lucide="landmark" class="icon icon-sm" style="vertical-align: text-bottom; margin-right: 8px;"></i>
              Geschichte & Architektur Guide
            </h3>
            <p style="margin-bottom: var(--space-4); color: var(--text-secondary); flex: 1;" data-i18n="enthusiasts.history.description">
              Spurensuche im Kalten Krieg: Grenzstreifen-Relikte im Park Babelsberg, KGB-GefÃ¤ngnis, Glienicker BrÃ¼cke.
              Architektonische SchÃ¤tze: Dampfmaschinenhaus, Gerichtslaube, Freimaurersymbole im Neuen Garten.
              Der "Raudensky-Coup" â€“ GÃ¤rtner des GedÃ¤chtnisses. Die Parks als vielschichtige Palimpseste der Geschichte.
            </p>
            <a href="geschichte.html" class="btn" style="align-self: flex-start;" data-i18n="enthusiasts.history.button">Zum Geschichte-Guide</a>
          </div>
        </article>

        <article class="card" style="display: flex; flex-direction: column;">
          <img src="images/park-babelsberg/liegewiesen.jpeg" alt="Soziale Treffpunkte" loading="lazy" style="width: 100%; height: 250px; object-fit: cover; border-radius: var(--radius-lg);">
          <div style="flex: 1; display: flex; flex-direction: column; padding: var(--space-4) 0;">
            <h3 style="margin-bottom: var(--space-2);" data-i18n="enthusiasts.social.title">
              <i data-lucide="coffee" class="icon icon-sm" style="vertical-align: text-bottom; margin-right: 8px;"></i>
              Soziale Treffpunkte Guide
            </h3>
            <p style="margin-bottom: var(--space-4); color: var(--text-secondary); flex: 1;" data-i18n="enthusiasts.social.description">
              Die Parks als "dritter Ort": Jugendkultur am Heiligen See, CafÃ© Matschke als Scharnier zur Kunstszene,
              Schlosskonzerte als kulturelles Ritual. Von autonomen Zonen Ã¼ber intellektuellen Austausch bis zu
              kultivierten Community-Events â€“ die Parks als Fundament urbaner IdentitÃ¤t.
            </p>
            <a href="soziale-treffpunkte.html" class="btn" style="align-self: flex-start;" data-i18n="enthusiasts.social.button">Zum Soziale-Orte-Guide</a>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="section" style="background: var(--bg-accent); padding: var(--space-8) var(--container-padding); margin-left: calc(var(--container-padding) * -1); margin-right: calc(var(--container-padding) * -1);">
    <div style="max-width: var(--container-max); margin: 0 auto;">
      <div class="section-header">
        <h2 data-i18n="faq.title">HÃ¤ufig gestellte Fragen</h2>
        <p data-i18n="faq.subtitle">Schnelle Antworten auf die wichtigsten Fragen rund um deinen Besuch.</p>
      </div>

      <details class="faq-item">
        <summary data-i18n="faq.q1.question">Wo finde ich Toiletten im Park?</summary>
        <div class="faq-item-content">
          <p data-i18n-html="faq.q1.answer">Ã–ffentliche WCs sind an den HaupteingÃ¤ngen ausgeschildert. Nutze unseren <a href="#location-finder">Location-Finder</a> um die nÃ¤chste Toilette zu finden. Einige sind kostenpflichtig (ca. 0,50â‚¬), andere kostenlos.</p>
        </div>
      </details>

      <details class="faq-item">
        <summary data-i18n="faq.q2.question">Ist der Park barrierefrei?</summary>
        <div class="faq-item-content">
          <p data-i18n="faq.q2.answer">Die asphaltierten Hauptwege sind gut befahrbar fÃ¼r RollstÃ¼hle und Kinderwagen. Einige Naturwege haben Steigungen und sind weniger geeignet. Der Flatowturm ist nicht barrierefrei (nur Ã¼ber Treppen erreichbar).</p>
        </div>
      </details>

      <details class="faq-item">
        <summary data-i18n="faq.q3.question">Darf ich im Park grillen oder picknicken?</summary>
        <div class="faq-item-content">
          <p data-i18n="faq.q3.answer">Picknicken ist auf den Liegewiesen erlaubt. Grillen ist im gesamten Park verboten (Brandschutz). Bitte MÃ¼ll mitnehmen oder in den bereitgestellten AbfallbehÃ¤ltern entsorgen.</p>
        </div>
      </details>

      <details class="faq-item">
        <summary data-i18n="faq.q4.question">Kann ich mit dem Fahrrad durch den Park fahren?</summary>
        <div class="faq-item-content">
          <p data-i18n-html="faq.q4.answer">Radfahren ist nur auf den asphaltierten Hauptwegen erlaubt. Auf Wanderwegen und Naturpfaden ist Radfahren verboten. Schilder vor Ort beachten. Mehr Details in unserer <a href="/park-babelsberg/parkordnung-vergleich.html">Parkordnung</a>.</p>
        </div>
      </details>

      <details class="faq-item">
        <summary data-i18n="faq.q5.question">Sind Hunde im Park erlaubt?</summary>
        <div class="faq-item-content">
          <p data-i18n="faq.q5.answer">Ja, Hunde sind erlaubt, mÃ¼ssen aber an der Leine gefÃ¼hrt werden. Hundekotbeutel bitte mitnehmen und in den AbfallbehÃ¤ltern entsorgen.</p>
        </div>
      </details>

      <details class="faq-item">
        <summary data-i18n="faq.q6.question">Kann ich in der Havel schwimmen?</summary>
        <div class="faq-item-content">
          <p data-i18n="faq.q6.answer">Nein, Schwimmen in der Havel ist verboten (keine Badeaufsicht, StrÃ¶mung, Schiffsverkehr). Alternative Badestellen gibt es am Heiligen See im Neuen Garten.</p>
        </div>
      </details>

      <details class="faq-item">
        <summary data-i18n="faq.q7.question">Gibt es FÃ¼hrungen durch den Park?</summary>
        <div class="faq-item-content">
          <p data-i18n-html="faq.q7.answer">Ja, die Stiftung PreuÃŸische SchlÃ¶sser und GÃ¤rten bietet regelmÃ¤ÃŸig FÃ¼hrungen an. Termine und Buchung auf <a href="https://www.spsg.de" target="_blank" rel="noopener">www.spsg.de</a>.</p>
        </div>
      </details>

      <details class="faq-item">
        <summary data-i18n="faq.q8.question">Wie lange sollte ich fÃ¼r einen Besuch einplanen?</summary>
        <div class="faq-item-content">
          <p data-i18n="faq.q8.answer">FÃ¼r einen entspannten Spaziergang: 2-3 Stunden. Mit Schlossbesichtigung und Flatowturm: 4-5 Stunden. FÃ¼r alle 4 Areale: Ganztagesausflug empfohlen.</p>
        </div>
      </details>
    </div>
  </section>

  <!-- Location Finder - Vorletzter Abschnitt -->
  <section id="location-finder" class="section" style="background: var(--bg-accent); padding: var(--space-8) var(--container-padding); margin-left: calc(var(--container-padding) * -1); margin-right: calc(var(--container-padding) * -1);">
    <div style="max-width: var(--container-max); margin: 0 auto;">
      <div class="section-header">
        <h2 data-i18n="finder.title">Finde was du brauchst</h2>
        <p data-i18n="finder.subtitle">Interaktive Karte mit WCs, Restaurants, ParkplÃ¤tzen und Ã–PNV-Haltestellen. Mit Standort-Navigation und Live-FahrplanauskÃ¼nften.</p>
      </div>

      <div class="card" style="padding:0;overflow:hidden;">
        <!-- Main Filter Buttons -->
        <div style="padding:16px;display:flex;gap:12px;flex-wrap:wrap;background:var(--bg-secondary);border-bottom:2px solid var(--border-light);">
          <button id="filter-wc" class="filter-btn active" data-layer="wc" aria-pressed="true">
            <i data-lucide="map-pin" class="filter-icon icon icon-sm"></i>
            <span>WC</span>
            <span class="filter-count" id="count-wc">0</span>
          </button>
          <button id="filter-gastro" class="filter-btn active" data-layer="gastro" aria-pressed="true">
            <i data-lucide="utensils-crossed" class="filter-icon icon icon-sm"></i>
            <span>Gastronomie</span>
            <span class="filter-count" id="count-gastro">0</span>
          </button>
          <button id="filter-parking" class="filter-btn" data-layer="parking" aria-pressed="false">
            <i data-lucide="parking-circle" class="filter-icon icon icon-sm"></i>
            <span>ParkplÃ¤tze</span>
            <span class="filter-count" id="count-parking">0</span>
          </button>
          <button id="filter-oepnv" class="filter-btn" data-layer="oepnv" aria-pressed="false">
            <i data-lucide="bus" class="filter-icon icon icon-sm"></i>
            <span>Ã–PNV</span>
            <span class="filter-count" id="count-oepnv">0</span>
          </button>
        </div>

        <!-- Sub-Filter fÃ¼r Gastronomie -->
        <div id="gastro-subfilter" class="subfilter-panel">
          <div style="padding:12px 16px;display:flex;gap:8px;flex-wrap:wrap;background:#fafafa;">
            <label class="subfilter-checkbox">
              <input type="checkbox" data-amenity="restaurant" checked>
              <i data-lucide="utensils-crossed" class="icon icon-xs"></i> Restaurant
            </label>
            <label class="subfilter-checkbox">
              <input type="checkbox" data-amenity="cafe" checked>
              <i data-lucide="coffee" class="icon icon-xs"></i> CafÃ©
            </label>
            <label class="subfilter-checkbox">
              <input type="checkbox" data-amenity="fast_food" checked>
              <i data-lucide="sandwich" class="icon icon-xs"></i> Imbiss
            </label>
            <label class="subfilter-checkbox">
              <input type="checkbox" data-amenity="bar" checked>
              <i data-lucide="wine" class="icon icon-xs"></i> Bar
            </label>
            <label class="subfilter-checkbox">
              <input type="checkbox" data-amenity="pub" checked>
              <i data-lucide="beer" class="icon icon-xs"></i> Pub
            </label>
            <label class="subfilter-checkbox">
              <input type="checkbox" data-amenity="ice_cream" checked>
              <i data-lucide="ice-cream" class="icon icon-xs"></i> EiscafÃ©
            </label>
            <label class="subfilter-checkbox">
              <input type="checkbox" data-amenity="biergarten" checked>
              <i data-lucide="trees" class="icon icon-xs"></i> Biergarten
            </label>
          </div>
        </div>

        <!-- Map Container -->
        <div id="unified-map" style="height:500px;width:100%;background:#e5e7eb;" role="application" aria-label="Interaktive Karte"></div>

        <!-- Controls -->
        <div style="padding:16px;display:flex;gap:12px;flex-wrap:wrap;align-items:center;background:white;">
          <button id="btn-locate" class="map-btn map-btn-primary" aria-label="Meinen Standort nutzen">
            <i data-lucide="locate" class="icon icon-sm"></i>
            <span>Standort nutzen</span>
          </button>
          <button id="btn-nearest-wc" class="map-btn map-btn-secondary" disabled aria-label="Zum nÃ¤chsten WC navigieren">
            <i data-lucide="navigation" class="icon icon-sm"></i>
            <span>NÃ¤chstes WC</span>
          </button>
          <button id="btn-nearest-gastro" class="map-btn map-btn-secondary" disabled aria-label="Zum nÃ¤chsten Restaurant navigieren">
            <i data-lucide="navigation" class="icon icon-sm"></i>
            <span>NÃ¤chstes Restaurant</span>
          </button>
          <button id="btn-nearest-parking" class="map-btn map-btn-secondary" disabled style="display:none;" aria-label="Zum nÃ¤chsten Parkplatz navigieren">
            <i data-lucide="navigation" class="icon icon-sm"></i>
            <span>NÃ¤chster Parkplatz</span>
          </button>
        </div>

        <!-- Distance Info -->
        <div id="distance-info" style="padding:0 16px 12px;color:var(--text-muted);font-size:0.9rem;min-height:20px;" role="status" aria-live="polite"></div>

        <!-- Legend -->
        <details class="notice" style="margin:0 16px 16px;cursor:pointer;">
          <summary style="font-weight:600;padding:8px 0;">ğŸ“ Legende & Datenquellen</summary>
          <div style="padding-top:8px;font-size:0.9rem;line-height:1.6;">
            <strong>WC:</strong> ğŸŸ¢ Ã–ffentlich Â· ğŸŸ¡ Nur Kunden Â· ğŸ’° Kostenpflichtig<br>
            <strong>Gastronomie:</strong> ğŸ½ï¸ Restaurant Â· â˜• CafÃ© Â· ğŸ” Imbiss Â· ğŸº Bar/Pub Â· ğŸ¦ EiscafÃ© Â· ğŸŒ³ Biergarten<br>
            <strong>ParkplÃ¤tze:</strong> ğŸ…¿ï¸ Ã–ffentlich Â· ğŸ’° Kostenpflichtig Â· ğŸ”’ Privat Â· ğŸ¢ Parkhaus Â· ğŸš² Fahrrad<br>
            <strong>Ã–PNV:</strong> ğŸš Bus & Tram Haltestellen Â· ğŸ• FahrplanauskÃ¼nfte via VBB<br>
            <strong>Daten:</strong> Â© OpenStreetMap-Mitwirkende (ODbL) Â·
            <strong>Navigation:</strong> Google Maps
          </div>
        </details>
      </div>
    </div>
  </section>

  <!-- AdSense Ad Unit 1 -->
  <section class="section" style="padding: var(--space-4) 0;">
    <div style="max-width: 728px; margin: 0 auto;">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-1712273263687132"
           data-ad-slot="4436722440"
           data-ad-format="horizontal"
           data-full-width-responsive="true"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </section>

  <!-- Anreise & ParkplÃ¤tze - Letzter Abschnitt -->
  <section id="anreise" class="section" style="background: var(--bg-accent); padding: var(--space-8) var(--container-padding); margin-left: calc(var(--container-padding) * -1); margin-right: calc(var(--container-padding) * -1);">
    <div style="max-width: var(--container-max); margin: 0 auto;">
      <div class="section-header">
        <h2 data-i18n="arrival.title">Anreise & ParkplÃ¤tze</h2>
        <p data-i18n="arrival.subtitle">So kommst du am besten zum Park Babelsberg â€“ mit Auto, Ã–PNV oder Fahrrad.</p>
      </div>

      <div class="grid-2">
        <article class="card">
          <h3 data-i18n="arrival.car.title">ğŸš— Mit dem Auto</h3>
          <p>
            <strong data-i18n="arrival.car.mainParking">Hauptparkplatz "Am Neuen Garten"</strong><br>
            <span data-i18n="arrival.car.gps">GPS: 52.419083, 13.071547</span><br>
            <span data-i18n="arrival.car.capacity">KapazitÃ¤t: ca. 50 StellplÃ¤tze</span><br>
            <span data-i18n="arrival.car.distance">Entfernung zum Schloss: 1,2 km (15 Min. FuÃŸweg)</span>
          </p>
          <p style="margin-top:12px;color:var(--text-muted);">
            <strong style="color:var(--warning);" data-i18n="arrival.car.warning">An Wochenenden oft voll ab 11 Uhr</strong> â€“ <span data-i18n="arrival.car.warningTip">frÃ¼h kommen empfohlen!</span>
          </p>
          <a href="#location-finder" class="btn" onclick="setTimeout(() => { document.getElementById('filter-parking').click(); }, 100);" data-i18n="arrival.car.button">Alle ParkplÃ¤tze auf Karte</a>
        </article>

        <article class="card">
          <h3 data-i18n="arrival.transit.title">ğŸšŒ Mit Ã–PNV (Empfohlen!)</h3>
          <p>
            <strong>Bus 694:</strong> <span data-i18n="arrival.transit.bus694">Haltestelle "Park Babelsberg" (direkt am Eingang)</span><br>
            <strong>Bus 690:</strong> <span data-i18n="arrival.transit.bus690">Haltestelle "Rathaus Babelsberg" (800m FuÃŸweg)</span><br>
            <strong>Tram 93:</strong> <span data-i18n="arrival.transit.tram93">Haltestelle "Lutherplatz" (1,2 km FuÃŸweg)</span>
          </p>
          <p style="margin-top:12px;color:var(--text-muted);">
            <strong style="color:var(--success);" data-i18n="arrival.transit.benefit">Klimafreundlich und stressfrei</strong> â€“ <span data-i18n="arrival.transit.benefitDetail">keine Parkplatzsuche! Live-Abfahrtszeiten auf unserer Karte verfÃ¼gbar.</span>
          </p>
          <a href="#location-finder" class="btn" onclick="setTimeout(() => { document.getElementById('filter-oepnv').click(); }, 100);" data-i18n="arrival.transit.button">Live-Fahrplan</a>
        </article>
      </div>

      <div class="notice" style="margin-top:var(--space-4);">
        <h3 style="margin-top:0;" data-i18n="arrival.tips.title">ğŸ’¡ Parktipps fÃ¼r Autofahrer</h3>
        <p style="margin:0 0 12px 0;" data-i18n="arrival.tips.tip1">
          <strong>Tipp 1:</strong> Wochenend-Besucher sollten vor 10 Uhr anreisen oder auf Ã–PNV umsteigen.
        </p>
        <p style="margin:0 0 12px 0;" data-i18n="arrival.tips.tip2">
          <strong>Tipp 2:</strong> Ãœber 1200 weitere ParkplÃ¤tze in der Umgebung (siehe Karte oben).
        </p>
        <p style="margin:0;" data-i18n="arrival.tips.tip3">
          <strong>Tipp 3:</strong> Park + Ride: Parkplatz am S-Bahnhof Griebnitzsee (kostenlos), dann 15 Min. FuÃŸweg.
        </p>
      </div>
    </div>
  </section>

</main>

<!-- Footer -->
<footer>
  <p>
    <a href="/park-babelsberg/impressum.html" data-i18n="footer.imprint">Impressum</a> Â·
    <a href="/park-babelsberg/datenschutz.html" data-i18n="footer.privacy">Datenschutz</a> Â·
    <a href="#" onclick="window.showCookieBanner(); return false;" data-i18n="footer.cookies">Cookie-Einstellungen</a>
  </p>
  <p style="margin-top:var(--space-2);color:var(--text-light);" data-i18n="footer.copyright">
    Â© 2025 Park Babelsberg Info Â· Daten: OpenStreetMap-Mitwirkende (ODbL)
  </p>
</footer>

<!-- Leaflet CSS - Preload for performance -->
<link rel="preload" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"></noscript>

<!-- Leaflet MarkerCluster CSS - Lazy load -->
<link rel="preload" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" as="style" onload="this.onload=null;this.rel='stylesheet'">

<!-- Leaflet JS - Defer loading -->
<script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin="anonymous"></script>

<!-- Leaflet MarkerCluster JS - Defer loading -->
<script defer src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js" crossorigin="anonymous"></script>

<!-- Styles -->
<style>
  /* Filter Buttons */
  .filter-btn {
    padding: 10px 16px;
    border: 2px solid #d1d5db;
    border-radius: 8px;
    background: white;
    color: #374151;
    font-family: var(--font-body);
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 6px;
    flex: 1 1 auto;
    min-width: 140px;
    justify-content: center;
  }

  .filter-btn .filter-icon {
    font-size: 1.2rem;
  }

  .filter-btn .filter-count {
    background: #e5e7eb;
    color: #6b7280;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 700;
    margin-left: 4px;
  }

  .filter-btn.active {
    border-color: #2563eb;
    background: #2563eb;
    color: white;
    box-shadow: 0 2px 4px rgba(37,99,235,0.3);
  }

  .filter-btn.active .filter-count {
    background: rgba(255,255,255,0.3);
    color: white;
  }

  .filter-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }

  .filter-btn:active {
    transform: translateY(0);
  }

  /* Sub-Filter Panel */
  .subfilter-panel {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    border-bottom: 1px solid #e5e7eb;
  }

  .subfilter-panel.open {
    max-height: 200px;
  }

  .subfilter-checkbox {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: white;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
  }

  .subfilter-checkbox:hover {
    border-color: #2563eb;
    background: #eff6ff;
  }

  .subfilter-checkbox input[type="checkbox"] {
    cursor: pointer;
  }

  /* Map Buttons */
  .map-btn {
    padding: 10px 16px;
    border: none;
    border-radius: 8px;
    font-family: var(--font-body);
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
    flex: 1 1 auto;
    min-width: 140px;
  }

  .map-btn-primary {
    background: linear-gradient(135deg, #2563eb, #1d4ed8);
    color: white;
    box-shadow: 0 2px 4px rgba(37,99,235,0.3);
  }

  .map-btn-primary:hover:not(:disabled) {
    box-shadow: 0 4px 12px rgba(37,99,235,0.4);
    transform: translateY(-2px);
  }

  .map-btn-secondary {
    background: white;
    color: #2563eb;
    border: 2px solid #2563eb;
    font-size: 0.85rem;
    padding: 8px 12px;
  }

  .map-btn-secondary:hover:not(:disabled) {
    background: #2563eb;
    color: white;
    transform: translateY(-1px);
  }

  .map-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none !important;
  }

  /* Leaflet Popup Customization */
  .leaflet-popup-content-wrapper {
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    padding: 0;
    overflow: hidden;
  }

  .leaflet-popup-content {
    margin: 0;
    font-family: var(--font-body);
    min-width: 200px;
  }

  .popup-header {
    background: linear-gradient(135deg, #2563eb, #1d4ed8);
    color: white;
    padding: 12px 16px;
    font-weight: 700;
    font-size: 1rem;
  }

  .popup-body {
    padding: 12px 16px;
    line-height: 1.6;
  }

  .popup-body p {
    margin: 4px 0;
    font-size: 0.9rem;
  }

  .popup-actions {
    padding: 12px 16px;
    background: #f9fafb;
    border-top: 1px solid #e5e7eb;
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .popup-btn {
    flex: 1;
    padding: 8px 12px;
    border: none;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
    display: inline-block;
    text-align: center;
    min-width: 100px;
  }

  .popup-btn-primary {
    background: #2563eb;
    color: white;
  }

  .popup-btn-primary:hover {
    background: #1d4ed8;
    transform: translateY(-1px);
  }

  .popup-btn-secondary {
    background: white;
    color: #2563eb;
    border: 1px solid #2563eb;
  }

  .popup-btn-secondary:hover {
    background: #eff6ff;
  }

  /* Marker Cluster Customization */
  .marker-cluster-small, .marker-cluster-medium, .marker-cluster-large {
    background: rgba(37, 99, 235, 0.6);
  }

  .marker-cluster-small div, .marker-cluster-medium div, .marker-cluster-large div {
    background: rgba(37, 99, 235, 0.8);
    color: white;
    font-weight: 700;
  }

  /* Mobile Optimization */
  @media (max-width: 768px) {
    #unified-map {
      height: 400px;
    }

    .filter-btn {
      font-size: 0.85rem;
      padding: 8px 12px;
      min-width: 110px;
    }

    .filter-btn .filter-icon {
      font-size: 1rem;
    }

    .map-btn {
      font-size: 0.85rem;
      padding: 8px 12px;
      min-width: 110px;
    }

    .subfilter-checkbox {
      font-size: 0.8rem;
      padding: 4px 8px;
    }

    .popup-header {
      font-size: 0.9rem;
      padding: 10px 12px;
    }

    .popup-body p {
      font-size: 0.85rem;
    }

    .popup-btn {
      font-size: 0.8rem;
      padding: 6px 10px;
      min-width: 80px;
    }
  }

  @media (max-width: 480px) {
    #unified-map {
      height: 350px;
    }

    .filter-btn, .map-btn {
      flex: 1 1 100%;
      max-width: none;
    }

    .popup-actions {
      flex-direction: column;
    }

    .popup-btn {
      width: 100%;
    }
  }
</style>

<!-- Theme Toggle Script - FOUC Prevention -->
<script>
(function() {
  'use strict';
  
  // Prevent FOUC - apply theme before page renders
  const savedTheme = localStorage.getItem('theme');
  const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  const initialTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
  document.documentElement.setAttribute('data-theme', initialTheme);
})();
</script>

<!-- Map Script -->
<script>
(function() {
  'use strict';

  // Configuration
  const CONFIG = {
    dataPaths: {
      wc: 'data/wc.geojson',
      gastro: 'data/gastronomie.geojson',
      parking: 'data/parking.geojson',
      oepnv: 'data/oepnv.geojson'
    },
    defaultCenter: [52.400, 13.085],
    defaultZoom: 14,
    maxZoom: 19,
    tileLayer: 'https://tile.openstreetmap.org/{z}/{x}/{y}.png',
    tileAttribution: 'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    clusterOptions: {
      maxClusterRadius: 60,
      spiderfyOnMaxZoom: true,
      showCoverageOnHover: false,
      zoomToBoundsOnClick: true
    }
  };

  // Color schemes
  const COLORS = {
    wc: { public: '#10b981', customers: '#f59e0b', paid: '#3b82f6' },
    gastro: {
      restaurant: '#dc2626', cafe: '#92400e', fast_food: '#f59e0b',
      bar: '#7c3aed', pub: '#7c3aed', ice_cream: '#ec4899', biergarten: '#10b981'
    },
    parking: {
      bicycle_parking: '#10b981', public_free: '#3b82f6', public_paid: '#f59e0b',
      private: '#6b7280', 'multi-storey': '#1e3a8a'
    }
  };

  // State
  let map = null;
  let userPos = null;
  let userMarker = null;
  let clusters = {
    wc: L.markerClusterGroup(CONFIG.clusterOptions),
    gastro: L.markerClusterGroup(CONFIG.clusterOptions),
    parking: L.markerClusterGroup(CONFIG.clusterOptions),
    oepnv: L.markerClusterGroup(CONFIG.clusterOptions)
  };
  let data = { wc: [], gastro: [], parking: [], oepnv: [] };
  let activeFilters = { wc: true, gastro: true, parking: false, oepnv: false };
  let gastroSubFilters = {
    restaurant: true, cafe: true, fast_food: true,
    bar: true, pub: true, ice_cream: true, biergarten: true
  };

  // DOM Elements
  const btnLocate = document.getElementById('btn-locate');
  const btnNearestWC = document.getElementById('btn-nearest-wc');
  const btnNearestGastro = document.getElementById('btn-nearest-gastro');
  const btnNearestParking = document.getElementById('btn-nearest-parking');
  const distanceInfo = document.getElementById('distance-info');
  const filterButtons = document.querySelectorAll('.filter-btn');
  const gastroSubfilter = document.getElementById('gastro-subfilter');
  const gastroSubCheckboxes = document.querySelectorAll('.subfilter-checkbox input[type="checkbox"]');

  // Initialize Map
  function initMap() {
    map = L.map('unified-map', {
      center: CONFIG.defaultCenter,
      zoom: CONFIG.defaultZoom,
      maxZoom: CONFIG.maxZoom,
      zoomControl: true
    });

    L.tileLayer(CONFIG.tileLayer, {
      attribution: CONFIG.tileAttribution,
      maxZoom: CONFIG.maxZoom
    }).addTo(map);

    // Add Park Babelsberg boundary
    const parkBabelsbergBoundary = L.polygon([
      [52.412, 13.067],  // Nordwest
      [52.412, 13.105],  // Nordost
      [52.390, 13.105],  // SÃ¼dost
      [52.390, 13.067]   // SÃ¼dwest
    ], {
      color: '#228B22',  // Forest Green
      fillColor: '#90EE90',  // Light Green
      fillOpacity: 0.2,
      weight: 2,
      dashArray: '5, 5'
    }).addTo(map);
    
    parkBabelsbergBoundary.bindPopup('<strong>Park Babelsberg</strong><br>UNESCO-Welterbe seit 1990');

    // Add Neuer Garten boundary
    const neuerGartenBoundary = L.polygon([
      [52.395, 13.045],  // Nordwest
      [52.395, 13.070],  // Nordost
      [52.380, 13.070],  // SÃ¼dost
      [52.380, 13.045]   // SÃ¼dwest
    ], {
      color: '#228B22',  // Forest Green
      fillColor: '#98FB98',  // Pale Green
      fillOpacity: 0.2,
      weight: 2,
      dashArray: '5, 5'
    }).addTo(map);
    
    neuerGartenBoundary.bindPopup('<strong>Neuer Garten</strong><br>UNESCO-Welterbe seit 1990');

    // Add active clusters to map
    updateMapLayers();
  }

  // Update map layers based on active filters
  function updateMapLayers() {
    Object.keys(clusters).forEach(type => {
      if (activeFilters[type]) {
        if (!map.hasLayer(clusters[type])) {
          map.addLayer(clusters[type]);
        }
      } else {
        if (map.hasLayer(clusters[type])) {
          map.removeLayer(clusters[type]);
        }
      }
    });

    // Special handling for gastro subfilters
    if (activeFilters.gastro) {
      updateGastroMarkers();
    }

    // Update button visibility
    if (activeFilters.parking && userPos) {
      btnNearestParking.style.display = 'inline-block';
    } else {
      btnNearestParking.style.display = 'none';
    }
  }

  // Update gastro markers based on subfilters
  function updateGastroMarkers() {
    clusters.gastro.clearLayers();
    data.gastro.forEach(item => {
      if (gastroSubFilters[item.amenity]) {
        const color = COLORS.gastro[item.amenity] || '#6b7280';
        const icon = getGastroIcon(item.amenity);
        const marker = createMarker([item.lat, item.lng], color, icon);
        const popup = createGastroPopup(item.props, item.lat, item.lng);
        marker.bindPopup(popup);
        marker._amenityType = item.amenity;
        clusters.gastro.addLayer(marker);
      }
    });
  }

  // Load all data
  async function loadAllData() {
    try {
      const [wcData, gastroData, parkingData, oepnvData] = await Promise.all([
        fetch(CONFIG.dataPaths.wc).then(r => r.json()),
        fetch(CONFIG.dataPaths.gastro).then(r => r.json()),
        fetch(CONFIG.dataPaths.parking).then(r => r.json()),
        fetch(CONFIG.dataPaths.oepnv).then(r => r.json())
      ]);

      // Process WC data
      wcData.features.forEach(addWCMarker);
      document.getElementById('count-wc').textContent = wcData.features.length;

      // Process Gastro data
      gastroData.features.forEach(addGastroMarker);
      document.getElementById('count-gastro').textContent = gastroData.features.length;

      // Process Parking data
      parkingData.features.forEach(addParkingMarker);
      document.getElementById('count-parking').textContent = parkingData.features.length;

      // Process Ã–PNV data
      oepnvData.features.forEach(addOEPNVMarker);
      document.getElementById('count-oepnv').textContent = oepnvData.features.length;

      // Fit bounds
      const bounds = [
        ...data.wc.map(d => [d.lat, d.lng]),
        ...data.gastro.map(d => [d.lat, d.lng])
      ];

      if (bounds.length > 0) {
        map.fitBounds(bounds, { padding: [50, 50], maxZoom: 15 });
      }

    } catch (error) {
      console.error('Fehler beim Laden der Daten:', error);
    }
  }

  // Create marker
  function createMarker(latlng, color, emoji) {
    const icon = L.divIcon({
      className: 'custom-marker',
      html: `<div style="
        width: 32px;
        height: 32px;
        background: ${color};
        border: 3px solid white;
        border-radius: 50%;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
      ">${emoji}</div>`,
      iconSize: [32, 32],
      iconAnchor: [16, 16],
      popupAnchor: [0, -16]
    });

    return L.marker(latlng, { icon });
  }

  // Add WC marker
  function addWCMarker(feature) {
    const [lng, lat] = feature.geometry.coordinates;
    const props = feature.properties || {};

    let color = COLORS.wc.public;
    if (props.access === 'customers') color = COLORS.wc.customers;
    else if (props.fee === 'yes') color = COLORS.wc.paid;

    const marker = createMarker([lat, lng], color, 'ğŸš»');
    const popup = createWCPopup(props, lat, lng);
    marker.bindPopup(popup);

    clusters.wc.addLayer(marker);
    data.wc.push({ lat, lng, props, type: 'wc' });
  }

  // Add Gastro marker
  function addGastroMarker(feature) {
    const [lng, lat] = feature.geometry.coordinates;
    const props = feature.properties || {};

    const color = COLORS.gastro[props.amenity] || '#6b7280';
    const icon = getGastroIcon(props.amenity);
    const marker = createMarker([lat, lng], color, icon);
    const popup = createGastroPopup(props, lat, lng);
    marker.bindPopup(popup);

    marker._amenityType = props.amenity;
    clusters.gastro.addLayer(marker);
    data.gastro.push({ lat, lng, props, type: 'gastro', amenity: props.amenity });
  }

  // Add Parking marker
  function addParkingMarker(feature) {
    const [lng, lat] = feature.geometry.coordinates;
    const props = feature.properties || {};

    const category = getParkingCategory(props);
    const color = COLORS.parking[category] || '#3b82f6';
    const marker = createMarker([lat, lng], color, 'ğŸ…¿ï¸');
    const popup = createParkingPopup(props, lat, lng);
    marker.bindPopup(popup);

    clusters.parking.addLayer(marker);
    data.parking.push({ lat, lng, props, type: 'parking', category });
  }

  // Add Ã–PNV marker
  function addOEPNVMarker(feature) {
    const [lng, lat] = feature.geometry.coordinates;
    const props = feature.properties || {};

    const color = '#10b981';
    const marker = createMarker([lat, lng], color, 'ğŸš');
    const popup = createOEPNVPopup(props, lat, lng);
    marker.bindPopup(popup);

    clusters.oepnv.addLayer(marker);
    data.oepnv.push({ lat, lng, props, type: 'oepnv' });
  }

  // Helper functions
  function getGastroIcon(amenity) {
    const icons = {
      restaurant: 'ğŸ½ï¸', cafe: 'â˜•', fast_food: 'ğŸ”',
      bar: 'ğŸº', pub: 'ğŸº', ice_cream: 'ğŸ¦', biergarten: 'ğŸŒ³'
    };
    return icons[amenity] || 'ğŸ½ï¸';
  }

  function getParkingCategory(props) {
    if (props.amenity === 'bicycle_parking') return 'bicycle_parking';
    if (props.parking === 'multi-storey') return 'multi-storey';
    if (props.access === 'private') return 'private';
    if (props.fee === 'yes') return 'public_paid';
    return 'public_free';
  }

  // Create popups
  function createWCPopup(props, lat, lng) {
    const name = props.name || 'WC';
    const access = props.access === 'customers' ? 'ğŸŸ¡ Nur fÃ¼r Kunden' : 'ğŸŸ¢ Ã–ffentlich';
    const fee = props.fee === 'yes' ? 'ğŸ’° Kostenpflichtig' : props.fee === 'no' ? 'âœ“ Kostenlos' : '';
    const mapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=walking`;

    return `
      <div class="popup-header">ğŸš» ${name}</div>
      <div class="popup-body">
        <p>${access}</p>
        ${fee ? `<p>${fee}</p>` : ''}
      </div>
      <div class="popup-actions">
        <a href="${mapsUrl}" target="_blank" rel="noopener" class="popup-btn popup-btn-primary">
          ğŸ“ Route (Maps)
        </a>
      </div>
    `;
  }

  function createGastroPopup(props, lat, lng) {
    const name = props.name || 'Gastronomie';
    const type = getGastroLabel(props.amenity);
    const cuisine = props.cuisine ? `ğŸ´ ${props.cuisine}` : '';
    const outdoor = props.outdoor_seating === 'yes' ? 'ğŸŒ AuÃŸensitzplÃ¤tze' : '';
    const hours = props.opening_hours ? `ğŸ• ${props.opening_hours}` : '';
    const website = props.website || props.contact_website || props['contact:website'] || '';
    const mapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=walking`;

    let buttons = `<a href="${mapsUrl}" target="_blank" rel="noopener" class="popup-btn popup-btn-primary">ğŸ“ Route</a>`;
    if (website) {
      buttons += `<a href="${website}" target="_blank" rel="noopener" class="popup-btn popup-btn-secondary">ğŸŒ Website</a>`;
    }

    return `
      <div class="popup-header">${name}</div>
      <div class="popup-body">
        <p>${type}</p>
        ${cuisine ? `<p>${cuisine}</p>` : ''}
        ${outdoor ? `<p>${outdoor}</p>` : ''}
        ${hours ? `<p>${hours}</p>` : ''}
      </div>
      <div class="popup-actions">
        ${buttons}
      </div>
    `;
  }

  function createParkingPopup(props, lat, lng) {
    const name = props.name || 'Parkplatz';
    const type = props.amenity === 'bicycle_parking' ? 'ğŸš² Fahrradparkplatz' : 'ğŸ…¿ï¸ Auto-Parkplatz';
    const capacity = props.capacity ? `ğŸš— ${props.capacity} PlÃ¤tze` : '';
    const fee = props.fee === 'yes' ? 'ğŸ’° Kostenpflichtig' : props.fee === 'no' ? 'âœ“ Kostenlos' : '';
    const access = props.access === 'private' ? 'ğŸ”’ Privat' : props.access === 'customers' ? 'ğŸ”’ Nur Kunden' : '';
    const mapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=driving`;

    return `
      <div class="popup-header">${name}</div>
      <div class="popup-body">
        <p>${type}</p>
        ${capacity ? `<p>${capacity}</p>` : ''}
        ${fee ? `<p>${fee}</p>` : ''}
        ${access ? `<p>${access}</p>` : ''}
      </div>
      <div class="popup-actions">
        <a href="${mapsUrl}" target="_blank" rel="noopener" class="popup-btn popup-btn-primary">
          ğŸ“ Route (Auto)
        </a>
      </div>
    `;
  }

  function createOEPNVPopup(props, lat, lng) {
    const name = props.name || 'Haltestelle';
    const ref = props.ref ? `#${props.ref}` : '';
    const isBus = props.bus === true || props.bus === 'yes';
    const isTram = props.tram === true || props.tram === 'yes';

    let types = [];
    if (isBus) types.push('ğŸšŒ Bus');
    if (isTram) types.push('ğŸšŠ Tram');
    const typeLabel = types.length > 0 ? types.join(' Â· ') : 'ğŸš Ã–PNV';

    const mapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=walking`;
    const vbbUrl = `https://www.vbb.de/fahrplan/?origin=${lat},${lng}`;

    return `
      <div class="popup-header">ğŸš ${name} ${ref}</div>
      <div class="popup-body">
        <p>${typeLabel}</p>
      </div>
      <div class="popup-actions">
        <a href="${vbbUrl}" target="_blank" rel="noopener" class="popup-btn popup-btn-primary">
          ğŸ“± VBB-App
        </a>
        <a href="${mapsUrl}" target="_blank" rel="noopener" class="popup-btn popup-btn-secondary">
          ğŸ“ Route
        </a>
      </div>
    `;
  }

  function getGastroLabel(amenity) {
    const labels = {
      restaurant: 'ğŸ½ï¸ Restaurant', cafe: 'â˜• CafÃ©', fast_food: 'ğŸ” Imbiss',
      bar: 'ğŸº Bar', pub: 'ğŸº Pub', ice_cream: 'ğŸ¦ EiscafÃ©', biergarten: 'ğŸŒ³ Biergarten'
    };
    return labels[amenity] || 'ğŸ½ï¸ Gastronomie';
  }

  // Filter button handlers
  filterButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const layer = btn.dataset.layer;
      activeFilters[layer] = !activeFilters[layer];
      btn.classList.toggle('active');
      btn.setAttribute('aria-pressed', activeFilters[layer]);

      // Toggle gastro subfilter panel
      if (layer === 'gastro') {
        gastroSubfilter.classList.toggle('open', activeFilters.gastro);
      }

      updateMapLayers();
    });
  });

  // Gastro subfilter handlers
  gastroSubCheckboxes.forEach(checkbox => {
    checkbox.addEventListener('change', () => {
      const amenity = checkbox.dataset.amenity;
      gastroSubFilters[amenity] = checkbox.checked;
      if (activeFilters.gastro) {
        updateGastroMarkers();
      }
    });
  });

  // Initialize with gastro subfilter open
  if (activeFilters.gastro) {
    gastroSubfilter.classList.add('open');
  }

  // Locate user
  function locateUser() {
    if (!navigator.geolocation) {
      alert('Geolocation wird von deinem Browser nicht unterstÃ¼tzt.');
      return;
    }

    btnLocate.disabled = true;
    btnLocate.textContent = 'â³ Suche...';

    navigator.geolocation.getCurrentPosition(
      position => {
        userPos = {
          lat: position.coords.latitude,
          lng: position.coords.longitude
        };

        if (userMarker) {
          map.removeLayer(userMarker);
        }

        userMarker = L.circleMarker([userPos.lat, userPos.lng], {
          radius: 10,
          fillColor: '#ef4444',
          color: '#fff',
          weight: 3,
          opacity: 1,
          fillOpacity: 0.9
        }).addTo(map);

        userMarker.bindPopup('<strong>ğŸ“ Dein Standort</strong>').openPopup();
        map.setView([userPos.lat, userPos.lng], 16);

        btnNearestWC.disabled = false;
        btnNearestGastro.disabled = false;
        if (activeFilters.parking) btnNearestParking.disabled = false;
        btnLocate.textContent = 'âœ“ Standort aktiv';
        btnLocate.disabled = false;
      },
      error => {
        btnLocate.disabled = false;
        btnLocate.textContent = 'ğŸ“ Standort nutzen';
        let message = 'Standortzugriff fehlgeschlagen. ';
        switch(error.code) {
          case error.PERMISSION_DENIED:
            message += 'Bitte erlaube Standortzugriff.';
            break;
          case error.POSITION_UNAVAILABLE:
            message += 'Standort nicht verfÃ¼gbar.';
            break;
          case error.TIMEOUT:
            message += 'ZeitÃ¼berschreitung.';
            break;
        }
        alert(message);
      },
      { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
    );
  }

  // Find nearest location
  function findNearest(type) {
    if (!userPos) return null;
    const locations = data[type];
    if (!locations || locations.length === 0) return null;

    let nearest = null;
    let minDist = Infinity;

    locations.forEach(loc => {
      const dist = getDistance(userPos.lat, userPos.lng, loc.lat, loc.lng);
      if (dist < minDist) {
        minDist = dist;
        nearest = loc;
      }
    });

    return nearest;
  }

  // Calculate distance (Haversine formula)
  function getDistance(lat1, lng1, lat2, lng2) {
    const R = 6371;
    const dLat = (lat2 - lat1) * Math.PI / 180;
    const dLng = (lng2 - lng1) * Math.PI / 180;
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
              Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
              Math.sin(dLng/2) * Math.sin(dLng/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return R * c;
  }

  // Navigate to nearest
  function navigateToNearest(type) {
    if (!userPos) return;

    const nearest = findNearest(type);
    if (!nearest) {
      const labels = { wc: 'WC', gastro: 'Restaurant', parking: 'Parkplatz' };
      alert(`Kein${type === 'gastro' ? '' : 'e'} ${labels[type]} gefunden.`);
      return;
    }

    const origin = `${userPos.lat},${userPos.lng}`;
    const destination = `${nearest.lat},${nearest.lng}`;
    const travelMode = type === 'parking' ? 'driving' : 'walking';
    const url = `https://www.google.com/maps/dir/?api=1&origin=${origin}&destination=${destination}&travelmode=${travelMode}`;

    window.open(url, '_blank', 'noopener,noreferrer');
  }

  // Event Listeners
  btnLocate.addEventListener('click', locateUser);
  btnNearestWC.addEventListener('click', () => navigateToNearest('wc'));
  btnNearestGastro.addEventListener('click', () => navigateToNearest('gastro'));
  btnNearestParking.addEventListener('click', () => navigateToNearest('parking'));

  // Initialize
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      initMap();
      loadAllData();
    });
  } else {
    initMap();
    loadAllData();
  }
})();
</script>

<!-- Theme Toggle Handler -->
<script>
(function() {
  'use strict';
  
  document.addEventListener('DOMContentLoaded', () => {
    const themeToggle = document.getElementById('theme-toggle');
    if (!themeToggle) return;
    
    // Toggle handler
    themeToggle.addEventListener('click', () => {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      
      // Announce to screen readers
      const announcement = `${newTheme === 'dark' ? 'Dunkler' : 'Heller'} Modus aktiviert`;
      announceToScreenReader(announcement);
      
      // Update button title
      themeToggle.setAttribute('title', 
        newTheme === 'dark' ? 'Heller Modus aktivieren' : 'Dunkler Modus aktivieren'
      );
    });
    
    // Listen to system preference changes
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
      // Only auto-switch if user hasn't manually set a preference
      if (!localStorage.getItem('theme')) {
        document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');
      }
    });
    
    // Set initial button title
    const currentTheme = document.documentElement.getAttribute('data-theme');
    themeToggle.setAttribute('title', 
      currentTheme === 'dark' ? 'Heller Modus aktivieren' : 'Dunkler Modus aktivieren'
    );
  });
  
  // Screen reader announcement
  function announceToScreenReader(message) {
    const announcement = document.createElement('div');
    announcement.setAttribute('role', 'status');
    announcement.setAttribute('aria-live', 'polite');
    announcement.className = 'sr-only';
    announcement.textContent = message;
    document.body.appendChild(announcement);
    setTimeout(() => announcement.remove(), 1000);
  }
})();
</script>

<!-- i18n System -->
<script src="assets/i18n.js"></script>

<!-- Lucide Icons - Defer for performance -->
<script defer src="https://unpkg.com/lucide@latest"></script>
<script>
  // Initialize Lucide icons after DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  });
</script>

</body>
</html>